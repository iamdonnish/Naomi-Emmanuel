<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Confirm Your Response</title>

<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: #fff6f8;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  .container {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    width: 90%;
    max-width: 420px;
    text-align: center;
  }

  h2 {
    color: #b23a48;
  }

  input {
    width: 100%;
    padding: 12px;
    border-radius: 6px;
    border: 1px solid #ccc;
    margin-top: 12px;
    font-size: 1rem;
  }

  button {
    margin-top: 18px;
    width: 100%;
    padding: 12px;
    background: #b23a48;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.3s ease;
    position: relative;
  }

  button:hover {
    background: #932f3d;
  }

  button:disabled {
    background: #a65b68;
    cursor: not-allowed;
  }

  .spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    vertical-align: middle;
    margin-left: 8px;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .success {
    margin-top: 20px;
    background: #e9ffe9;
    padding: 12px;
    border-radius: 6px;
    color: #2d7a2d;
    display: none;
  }

  /* Important notice styling */
  .notice {
    text-align: left;
    margin-top: 25px;
    background: #fff1f3;
    border-left: 4px solid #b23a48;
    padding: 15px 18px;
    border-radius: 8px;
    font-size: 0.9rem;
    color: #5a0d1c;
  }

  .notice h3 {
    margin-top: 0;
    color: #b23a48;
    font-size: 1rem;
    text-transform: uppercase;
  }

  .notice ul {
    margin: 10px 0 0 18px;
    padding: 0;
  }

  .notice li {
    margin-bottom: 8px;
    line-height: 1.5;
  }

  .notice strong {
    color: #000;
    font-weight: 600;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Almost Done!</h2>
  <p>Please enter your name to complete your RSVP.</p>

  <p><strong>Your Response:</strong> <span id="respText"></span></p>

  <input type="text" id="nameInput" placeholder="Enter your full name">

  <button id="submitBtn">Submit RSVP</button>

  <div class="success" id="successBox">âœ… Thank you! Your RSVP has been recorded.</div>

  <!-- ðŸ“ Important Notice Section -->
  <div class="notice">
    <h3>Important Notice</h3>
    <ul>
      <li>This event is <strong>strictly by invitation only</strong>, unless otherwise stated on your invitation.</li>
      <li><strong>Adults only.</strong></li>
      <li>Kindly RSVP by <strong>January 20th, 2026</strong>. Please respond as soon as possible.</li>
      <li>Spraying of money is <strong>not permitted.</strong> If you wish to give a gift, please send to:<br>
        <strong>2336302810 â€“ United Bank for Africa (UBA)<br>
        Account Name: Naomi Ngozi Umah</strong><br>
        (BTC and USDT are also accepted)
      </li>
      <li>Colour of the day: <strong>Nude or White.</strong></li>
      <li>Guests are kindly requested to <strong>exit the venue by 6:30 PM</strong>, after the reception concludes.</li>
    </ul>
  </div>
</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const rsvpResponse = params.get("rsvp") || "Unknown";
  document.getElementById("respText").textContent = rsvpResponse;

  const scriptURL = "https://script.google.com/macros/s/AKfycbxf-qKBVQ-r2-gHgpUfZxDTZ5sB5FuM6c9MqaGof-cF3WZCEajRd65d3DF84FDDu--P/exec";
  const submitBtn = document.getElementById("submitBtn");
  const successBox = document.getElementById("successBox");

  submitBtn.onclick = async () => {
    const name = document.getElementById("nameInput").value.trim();
    if (!name) {
      alert("Please enter your name.");
      return;
    }

    submitBtn.disabled = true;
    submitBtn.innerHTML = `Submitting <span class="spinner"></span>`;

    try {
      fetch(scriptURL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, response: rsvpResponse })
      });

      setTimeout(() => {
        submitBtn.innerHTML = "Submitted âœ…";
        successBox.style.display = "block";
      }, 2000);
    } catch (err) {
      alert("There was an issue submitting your response.");
      submitBtn.disabled = false;
      submitBtn.innerHTML = "Submit RSVP";
    }
  };
</script>

</body>
</html>
